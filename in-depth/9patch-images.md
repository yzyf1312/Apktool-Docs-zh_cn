# 9Patch图片

9Patch图片是Android平台上一种特殊的图片格式，它允许图片在某些区域进行拉伸而不失真。这种图片格式通常用于应用程序的背景、按钮、文本框等元素，以便在不同屏幕尺寸和分辨率的设备上保持良好的显示效果。

关于9patch图片，可以找到文档[NinePatch drawables](https://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)和[Create resizable bitmaps (9-patch files)](https://developer.android.com/tools/help/draw9patch.html)。不过，这些文档是为开发人员准备的，网络上几乎找不到针对使用已编译第三方应用程序的人员的信息。你可以在文档处找到如何创建9patch图片的信息，但没有关于它们如何实际工作的信息。

### 9Patch图片的两种形式

9Patch图片有两种形式：源文件和编译后的文件。

- **源文件** - 这种文件通常包含在应用程序的源代码中，或者可以在线免费获取。它们具有一个黑色边框，这个边框定义了图片的可拉伸区域和内容显示区域。
- **编译后的文件** - 这种文件存在于APK文件中，没有可见的边框，9Patch数据被编码进一个名为`npTc`的二进制片段中。Android操作系统可以快速读取这种格式的图片，但用户无法轻易看到或修改它们。

#### 9Patch图片的转换和使用

在使用9Patch图片时，需要注意以下几点：

- 不能直接在源文件和编译后的文件之间转换。如果尝试从APK中提取9Patch图片并用于另一个应用程序的源代码，构建过程中可能会出现错误。同样，不能直接将源9Patch图片放入APK中。
- 现代的图像处理工具通常不识别9Patch的二进制片段。因此，修改编译后的图片可能会破坏`npTc`片段，导致设备上的图片显示异常。

解决这个问题的唯一方法是在两者之间进行转换。编码器（将源文件转换为编译后文件）已集成到aapt工具中，并在构建过程中自动使用。这意味着我们只需要构建一个解码器，apktool自`v1.3.0`版本以来就包含了这个解码器，并且在解码过程中会自动运行在所有9Patch图片上。

如果你想修改9Patch图片，不要直接修改它们。相反，使用apktool解码包含9Patch图片的应用程序，然后修改图片。当你重新构建应用程序时，源9Patch图片会被编译。
